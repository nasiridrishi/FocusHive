> Task :checkKotlinGradlePluginConfigurationErrors
> Task :compileKotlin NO-SOURCE
> Task :compileJava UP-TO-DATE
> Task :processResources UP-TO-DATE
> Task :classes UP-TO-DATE
> Task :compileTestKotlin NO-SOURCE
> Task :compileTestJava UP-TO-DATE
> Task :processTestResources UP-TO-DATE
> Task :testClasses UP-TO-DATE

> Task :test

IdentityServiceApplicationTests > contextLoads() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

ApplicationConfigTest > Should not match wrong passwords FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

ApplicationConfigTest > Should create password encoder bean FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

ApplicationConfigTest > Should encode passwords correctly FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

ApplicationConfigTest > Should encode same password to different hashes FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

> Task :test

SecurityHeadersConfigTest > shouldUseDevelopmentModeWhenConfigured() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

SecurityHeadersConfigTest > shouldUseProductionModeWhenConfigured() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

AuthControllerMinimalTest > testControllerIsRegistered() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1880

AuthControllerTest > POST /api/v1/auth/password/reset-request - Should send reset email successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

AuthControllerTest > POST /api/v1/auth/password/reset - Should reset password successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/password/reset - Should reject weak password FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/register - Should reject invalid registration data FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/register - Should register successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/introspect - Should return inactive for invalid token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/validate - Should handle validation service exception FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/logout - Should logout successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/login - Should login user successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/login - Should reject invalid credentials FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/personas/switch - Should handle persona not found FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/introspect - Should handle introspection service exception FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/password/reset-request - Should return success even for non-existent email FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/validate - Should validate token and return invalid for invalid token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/switch-persona - Should switch persona successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/register - Should handle duplicate user registration FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/refresh - Should refresh token successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > Invalid JSON - Should return 400 FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/login - Should reject empty login request FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > Missing request body - Should return 400 FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/password/reset-request - Should reject invalid email format FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/password/reset - Should reject invalid reset token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/logout - Should handle missing Authorization header FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/personas/switch - Should require authentication FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/introspect - Should introspect token successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/register - Should register user successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/refresh - Should reject invalid refresh token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerTest > POST /api/v1/auth/validate - Should validate token successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerUnitTest > POST /api/v1/auth/personas/switch - Should reject request without authorization header FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:742

AuthControllerUnitTest > POST /api/v1/auth/logout - Should logout successfully FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:568

AuthControllerUnitTest > POST /api/v1/auth/login - Should login user successfully FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:131

AuthControllerUnitTest > POST /api/v1/auth/personas/switch - Should reject request with invalid persona ID FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:697

AuthControllerUnitTest > POST /api/v1/auth/logout - Should reject request without authorization header FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:618

AuthControllerUnitTest > POST /api/v1/auth/refresh - Should refresh token successfully FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:175

AuthControllerUnitTest > POST /api/v1/auth/register - Should register user successfully FAILED
    java.lang.AssertionError at AuthControllerUnitTest.java:108

HealthControllerTest > healthEndpointShouldReturnOk() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

OAuth2AuthorizationController Tests > Should require authentication for protected endpoints FAILED
    java.lang.AssertionError at OAuth2AuthorizationControllerTest.java:488

PerformanceTestController Integration Tests > Should return debug response with all required fields FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

PerformanceTestController Integration Tests > Should handle large user counts FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should cleanup existing data before setup FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should test non-optimized queries FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should return basic test response FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should handle empty database gracefully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should validate performance improvement exists FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should setup test data successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should return simple test response FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should setup test data with default user count FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should return health status from existing health controller FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should validate persona attributes are created FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should validate test data structure FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should return health status FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should compare optimized vs non-optimized performance FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PerformanceTestController Integration Tests > Should test optimized queries FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

SimpleAuthControllerTest > register_ShouldWork() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1880

SimplePerformanceTestControllerTest > basic_ShouldReturnResponse() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1880

SimplePerformanceTestControllerTest > debug_ShouldReturnResponse() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthControllerIntegrationTest > testBasicRegistration_ValidRequest_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1880

AuthControllerIntegrationTest > testBasicLogin_ValidCredentials_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testDuplicateRegistration_SameUsername_ReturnsConflict() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

AuthenticationFlowIntegrationTest > testAccountLockingAfterFailedAttempts_MultipleFailedLogins_AccountLocked() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testLoginWithEmail_ValidCredentials_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testPasswordResetFlow_ValidEmail_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testDuplicateRegistration_SameEmail_ReturnsConflict() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testCompleteRegistrationToLoginFlow_ValidData_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testLoginWithInvalidCredentials_ReturnsUnauthorized() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testRegistrationWithInvalidData_ReturnsBadRequest() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationFlowIntegrationTest > testPasswordResetRequest_NonExistentEmail_ReturnsSuccessToPreventEnumeration() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

AuthenticationIntegrationTest > testLogin_ValidCredentials_ReturnsTokens() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.boot.context.properties.ConfigurationPropertiesBindException at ConfigurationPropertiesBindingPostProcessor.java:99
            Caused by: org.springframework.boot.context.properties.bind.BindException at Binder.java:391
                Caused by: java.lang.IllegalStateException at JavaBeanBinder.java:108

BasicApplicationContextTest > applicationContextLoads() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.boot.context.properties.ConfigurationPropertiesBindException at ConfigurationPropertiesBindingPostProcessor.java:99
            Caused by: org.springframework.boot.context.properties.bind.BindException at Binder.java:391
                Caused by: java.lang.IllegalStateException at JavaBeanBinder.java:108

BasicAuthenticationIntegrationTest > testBasicLogin_ValidCredentials_Success() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

Error Handling Integration Tests > initializationError FAILED
    org.testcontainers.containers.ContainerFetchException at GenericContainer.java:1364
        Caused by: com.github.dockerjava.api.exception.BadRequestException at DefaultInvocationBuilder.java:237

OAuth2AuthorizationCodeFlowIntegrationTest > initializationError FAILED
    org.testcontainers.containers.ContainerFetchException at GenericContainer.java:1364
        Caused by: com.github.dockerjava.api.exception.BadRequestException at DefaultInvocationBuilder.java:237

OAuth2AuthorizationServerIntegrationTest > testClientRegistration_ValidRequest_CreatesClient() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

OAuth2AuthorizationServerIntegrationTest > testClientCredentialsFlow_ValidCredentials_ReturnsAccessToken() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testUserInfo_InvalidToken_ReturnsUnauthorized() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testClientCredentialsFlow_InvalidCredentials_ReturnsUnauthorized() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testClientCredentialsFlow_RequestParameters_ReturnsAccessToken() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testAuthorizationCodeFlow_CompleteFlow_ReturnsAccessToken() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testAuthorizationCodeFlow_InvalidCode_ReturnsError() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testServerMetadata_ReturnsCorrectConfiguration() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testUserInfo_ValidToken_ReturnsUserInfo() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testJwkSet_ReturnsValidJwkSet() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testRefreshTokenFlow_ValidToken_ReturnsNewTokens() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testTokenRevocation_ValidToken_RevokesToken() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testMultipleGrantTypes_SameClient_AllWork() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testAuthorizationCodeFlow_ExpiredCode_ReturnsError() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testTokenIntrospection_ValidToken_ReturnsTokenInfo() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2AuthorizationServerIntegrationTest > testTokenIntrospection_InvalidToken_ReturnsInactive() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2EndpointMappingTest > testOAuth2TokenEndpointExists() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2EndpointMappingTest > testOAuth2JwksEndpointExists() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

OAuth2EndpointMappingTest > testOAuth2WellKnownEndpointExists() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should prevent deletion of default persona FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.boot.context.properties.ConfigurationPropertiesBindException at ConfigurationPropertiesBindingPostProcessor.java:99
            Caused by: org.springframework.boot.context.properties.bind.BindException at Binder.java:391
                Caused by: java.lang.IllegalStateException at JavaBeanBinder.java:108

PersonaWorkflowIntegrationTest > Should delete non-default persona successfully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should create first persona as default and active FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should delete active non-default persona and switch to default FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should create multiple personas with unique settings FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should validate complete persona workflow end-to-end FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

PersonaWorkflowIntegrationTest > Should switch personas and update active status FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

RateLimitingIntegrationTest > initializationError FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: java.lang.IllegalStateException at Preconditions.java:512

SimpleAuthenticationIntegrationTest > testLogin_InvalidCredentials_Returns401() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.boot.context.properties.ConfigurationPropertiesBindException at ConfigurationPropertiesBindingPostProcessor.java:99
            Caused by: org.springframework.boot.context.properties.bind.BindException at Binder.java:391
                Caused by: java.lang.IllegalStateException at JavaBeanBinder.java:108

SimpleAuthenticationIntegrationTest > testRefreshToken_InvalidToken_Returns401() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

SimpleOAuth2DiagnosticTest > testClientCredentialsFlowReachesEndpoint() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

SimpleOAuth2IntegrationTest > shouldReturnHealthStatus() FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1880

Basic TestContainers Infrastructure Verification > initializationError FAILED
    org.testcontainers.containers.ContainerFetchException at GenericContainer.java:1364
        Caused by: com.github.dockerjava.api.exception.BadRequestException at DefaultInvocationBuilder.java:237

TestContainersDemoTest > initializationError FAILED
    org.testcontainers.containers.ContainerFetchException at GenericContainer.java:1364
        Caused by: com.github.dockerjava.api.exception.BadRequestException at DefaultInvocationBuilder.java:237

RateLimitingInterceptorTest > testPreHandle_NoRateLimitAnnotation_ShouldAllowRequest() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_WithRateLimit_WithinLimit_ShouldAllowRequest() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_XForwardedForHeader_ShouldUseCorrectIP() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_IPAndUserRateLimitType_ShouldCombineKeys() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_IPRateLimitType_ShouldUseCorrectKey() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_CloudflareIP_ShouldUseCFConnectingIP() FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at RateLimitingInterceptorTest.java:254

RateLimitingInterceptorTest > testPreHandle_RateLimiterException_ShouldAllowRequest() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_ProgressivePenalties_ShouldIncludeViolationCount() FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at RateLimitingInterceptorTest.java:309

RateLimitingInterceptorTest > testPreHandle_CustomKeyPrefix_ShouldUsePrefix() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_SkipAuthenticatedUser_ShouldAllowRequest() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_NotHandlerMethod_ShouldAllowRequest() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RateLimitingInterceptorTest > testPreHandle_UserRateLimitType_WithAuthenticatedUser_ShouldUseUserKey() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

UOL-335: Complete Performance Test Suite and Report Generator > 1. Small Dataset Performance (10 users) FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 2. Medium Dataset Performance (100 users) FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 3. Large Dataset Performance (1000 users) FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 4. EntityGraph Optimization Test FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 5. JOIN FETCH Performance Test FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 6. Batch Size Performance Test FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 7. Performance Index Effectiveness Test FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

UOL-335: Complete Performance Test Suite and Report Generator > 8. Generate Performance Report FAILED
    org.springframework.orm.jpa.JpaSystemException at PerformanceTestSuite.java:441
        Caused by: jakarta.persistence.PersistenceException at PerformanceTestSuite.java:441
            Caused by: java.lang.ClassCastException at PerformanceTestSuite.java:441

PersonaRepositoryTest > Should clear default persona except specified one FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find persona by ID and user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find personas with attributes ordered by priority FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should return empty when no active persona with attributes FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find active persona by user ID FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find personas by user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should update active persona atomically FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should not find persona by ID and different user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should save persona with all fields FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find persona by user ID and name FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find default persona by user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should allow same persona name for different users FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find active persona by user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should return empty when persona name not found FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find active persona with attributes FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should return zero count for user with no personas FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should enforce persona name uniqueness per user FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find personas ordered by priority FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should count personas by user ID FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should find personas by user ID FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

PersonaRepositoryTest > Should delete persona and maintain referential integrity FAILED
    jakarta.persistence.PersistenceException at PersonaRepositoryTest.java:78
        Caused by: java.lang.RuntimeException at PersonaRepositoryTest.java:78
            Caused by: java.lang.NullPointerException at PersonaRepositoryTest.java:78

UserRepositoryTest > Should enforce email uniqueness constraint FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:307
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:307
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:307

UserRepositoryTest > Should return empty when neither username nor email exists FAILED
    org.springframework.orm.jpa.JpaSystemException at UserRepositoryTest.java:187
        Caused by: jakarta.persistence.PersistenceException at UserRepositoryTest.java:187
            Caused by: java.lang.RuntimeException at UserRepositoryTest.java:187
                Caused by: java.lang.NullPointerException at UserRepositoryTest.java:187

UserRepositoryTest > Should find user by username FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:61
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:61
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:61

UserRepositoryTest > Should find user by email FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:88
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:88
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:88

UserRepositoryTest > Should delete user successfully FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:242
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:242
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:242

UserRepositoryTest > Should find user by username or email with email FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:173
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:173
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:173

UserRepositoryTest > Should return false when email does not exist FAILED
    org.springframework.orm.jpa.JpaSystemException at UserRepositoryTest.java:149
        Caused by: jakarta.persistence.PersistenceException at UserRepositoryTest.java:149
            Caused by: java.lang.RuntimeException at UserRepositoryTest.java:149
                Caused by: java.lang.NullPointerException at UserRepositoryTest.java:149

UserRepositoryTest > Should check if username exists FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:113
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:113
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:113

UserRepositoryTest > Should enforce username uniqueness constraint FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:284
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:284
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:284

UserRepositoryTest > Should check if email exists FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:136
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:136
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:136

UserRepositoryTest > Should update user successfully FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:216
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:216
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:216

UserRepositoryTest > Should handle concurrent access gracefully FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:257
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:257
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:257

UserRepositoryTest > Should find user by username or email with username FAILED
    jakarta.persistence.PersistenceException at UserRepositoryTest.java:159
        Caused by: java.lang.RuntimeException at UserRepositoryTest.java:159
            Caused by: java.lang.NullPointerException at UserRepositoryTest.java:159

UserRepositoryTest > Should return empty when user not found by email FAILED
    org.springframework.orm.jpa.JpaSystemException at UserRepositoryTest.java:103
        Caused by: jakarta.persistence.PersistenceException at UserRepositoryTest.java:103
            Caused by: java.lang.RuntimeException at UserRepositoryTest.java:103
                Caused by: java.lang.NullPointerException at UserRepositoryTest.java:103

Authorization Security Tests > CORS headers should be properly configured FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

Authorization Security Tests > Authenticated user can access their own personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User can update their own personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User can create personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User cannot access other user's personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User cannot update other user's personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User can delete their own personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User can switch to their own personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > SecurityService authorization methods work correctly FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > Unauthenticated access should be denied FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > Admin user can access any persona FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Authorization Security Tests > User cannot delete other user's personas FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Cookie Expiration and Refresh Tests > Should set appropriate expiration times for cookies FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

Cookie-Based Authentication Integration Tests > Cookie Expiration and Refresh Tests > Should handle expired access token with valid refresh token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Security Attack Scenarios > Should reject manipulated cookies FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Security Attack Scenarios > Should prevent concurrent session management attacks FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Security Attack Scenarios > Should validate token signature in cookies FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Security Attack Scenarios > Should prevent cookie fixation attacks FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Security Attack Scenarios > Should handle missing cookies gracefully FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > CSRF Protection Tests > Should have CSRF token accessible for JavaScript FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > CSRF Protection Tests > Should require CSRF token for protected operations FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > CSRF Protection Tests > Should accept requests with valid CSRF token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Logout with Cookies > Should not access protected endpoints after logout FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Logout with Cookies > Should clear cookies on logout FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Token Refresh with Cookies > Should reject expired refresh token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Token Refresh with Cookies > Should refresh token and update cookies FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Token Refresh with Cookies > Should reject invalid refresh token FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Login with Cookies > Should authenticate using cookie for protected endpoints FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Login with Cookies > Should prefer cookie over Authorization header FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Login with Cookies > Should fallback to Authorization header when no cookie present FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Login with Cookies > Should set httpOnly cookies on successful login FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Registration with Cookies > Should set httpOnly cookies on successful registration FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Cookie-Based Authentication Integration Tests > Registration with Cookies > Should fail registration without CSRF token when required FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

JwtAuthenticationFilter Tests > Should not authenticate with blacklisted token FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should not authenticate with invalid token FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should not call user service if token is blacklisted FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:425

JwtAuthenticationFilter Tests > Should extract username and user ID from token FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:341

JwtAuthenticationFilter Tests > Should not authenticate with missing authorization header FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should handle token with extra spaces in Bearer header FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:364

JwtAuthenticationFilter Tests > Should not authenticate with empty authorization header FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should set authentication details from request FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:315

JwtAuthenticationFilter Tests > Should call filterChain even when authentication fails FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should extract JWT from request header correctly FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:268

JwtAuthenticationFilter Tests > Should handle exception during authentication gracefully FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should validate all security checks in correct order FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:385

JwtAuthenticationFilter Tests > Should handle case-sensitive Bearer prefix FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should not call subsequent checks if token validation fails FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:404

JwtAuthenticationFilter Tests > Should not authenticate when user not found FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should authenticate user with valid token FAILED
    org.mockito.exceptions.verification.WantedButNotInvoked at JwtAuthenticationFilterTest.java:102

JwtAuthenticationFilter Tests > Should handle UserDetailsService exception gracefully FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should not authenticate with Bearer prefix only FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtAuthenticationFilter Tests > Should not authenticate with invalid token format FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

JwtTokenProvider Tests > Should generate refresh token with correct claims FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should handle token with different persona types FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should return true for malformed token when checking expiration FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract persona ID correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should generate custom token with specified claims and expiration FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should handle user with non-verified email FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract email correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should detect expired token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should return null persona ID for refresh token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should detect valid (non-expired) token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should reject token with wrong signature FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should get persona ID from token as string FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should get user ID from token as string FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should get claims from token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract user ID correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should throw exception when extracting claims from malformed token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should reject malformed token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should reject null token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should get access token expiration in seconds FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should validate valid token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should generate access token with correct claims FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should generate long-lived refresh token with remember me flag FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract expiration date correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should include unique JWT ID in each token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should get JWK set for token verification FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract username correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should reject empty token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should extract issued at date correctly FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

JwtTokenProvider Tests > Should throw exception when extracting claims from expired token FAILED
    java.lang.IllegalArgumentException at JwtTokenProviderTest.java:40

Field-Level Encryption Integration Tests > Should be able to search by email hash FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:180
        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
            Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException at ConstructorResolver.java:795
                    Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException at DefaultSingletonBeanRegistry.java:355

Field-Level Encryption Integration Tests > Should encrypt and decrypt user PII fields FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Field-Level Encryption Integration Tests > Should maintain data integrity through encryption/decryption cycle FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Field-Level Encryption Integration Tests > Should encrypt and decrypt persona PII fields FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Field-Level Encryption Integration Tests > Should handle large text in encrypted fields FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

Field-Level Encryption Integration Tests > Should handle null values in encrypted fields FAILED
    java.lang.IllegalStateException at DefaultCacheAwareContextLoaderDelegate.java:145

CookieJwtService Tests > JWT Extraction Tests > Should extract JWT from cookie when present FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testRateLimitExceededMessage() FAILED
    org.opentest4j.AssertionFailedError at RedisRateLimiterTest.java:159

RedisRateLimiterTest > testProgressivePenaltyDisabled() FAILED
    org.opentest4j.AssertionFailedError at RedisRateLimiterTest.java:188

RedisRateLimiterTest > testHandleProgressivePenalty_ShouldIncrementViolationCount() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testIsAllowed_WhenRedisFailure_ShouldReturnTrue() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testRateLimitKeyPrefixHandling() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testClearRateLimit_ShouldDeleteAllRelatedKeys() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testGetSecondsUntilRefill_WhenRedisFailure_ShouldReturnWindowDuration() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testBucketConfigurationCaching() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

RedisRateLimiterTest > testGetRemainingTokens_WhenRedisFailure_ShouldReturnMaxTokens() FAILED
    org.mockito.exceptions.misusing.UnnecessaryStubbingException at MockitoExtension.java:197

2025-09-12 19:28:51 [SpringApplicationShutdownHook] DEBUG o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@344e8c44, started on Fri Sep 12 19:28:17 IST 2025
2025-09-12 19:28:51 [SpringApplicationShutdownHook] DEBUG o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2185a1dd, started on Fri Sep 12 19:28:24 IST 2025
Hibernate: drop table if exists audit_log_metadata cascade 
Hibernate: drop table if exists audit_logs cascade 
Hibernate: drop table if exists consent_record_metadata cascade 
Hibernate: drop table if exists consent_records cascade 
Hibernate: drop table if exists data_export_categories cascade 
Hibernate: drop table if exists data_export_metadata cascade 
Hibernate: drop table if exists data_export_requests cascade 
Hibernate: drop table if exists data_permission_conditions cascade 
Hibernate: drop table if exists data_permission_grants cascade 
Hibernate: drop table if exists data_permissions cascade 
Hibernate: drop table if exists oauth_access_token_scopes cascade 
Hibernate: drop table if exists oauth_access_tokens cascade 
Hibernate: drop table if exists oauth_authorization_code_scopes cascade 
Hibernate: drop table if exists oauth_authorization_codes cascade 
Hibernate: drop table if exists oauth_client_grant_types cascade 
Hibernate: drop table if exists oauth_client_redirect_uris cascade 
Hibernate: drop table if exists oauth_client_scopes cascade 
Hibernate: drop table if exists oauth_clients cascade 
Hibernate: drop table if exists oauth_refresh_token_scopes cascade 
Hibernate: drop table if exists oauth_refresh_tokens cascade 
Hibernate: drop table if exists persona_activities cascade 
Hibernate: drop table if exists persona_activity_tags cascade 
Hibernate: drop table if exists persona_attributes cascade 
Hibernate: drop table if exists persona_profile_metadata cascade 
Hibernate: drop table if exists persona_profile_source_metadata cascade 
Hibernate: drop table if exists persona_profile_validation cascade 
Hibernate: drop table if exists persona_profiles cascade 
Hibernate: drop table if exists personas cascade 
Hibernate: drop table if exists privacy_settings cascade 
Hibernate: drop table if exists user_additional_roles cascade 
Hibernate: drop table if exists users cascade 
Hibernate: drop table if exists audit_log_metadata cascade 
Hibernate: drop table if exists audit_logs cascade 
Hibernate: drop table if exists consent_record_metadata cascade 
Hibernate: drop table if exists consent_records cascade 
Hibernate: drop table if exists data_export_categories cascade 
Hibernate: drop table if exists data_export_metadata cascade 
Hibernate: drop table if exists data_export_requests cascade 
Hibernate: drop table if exists data_permission_conditions cascade 
Hibernate: drop table if exists data_permission_grants cascade 
Hibernate: drop table if exists data_permissions cascade 
Hibernate: drop table if exists oauth_access_token_scopes cascade 
Hibernate: drop table if exists oauth_access_tokens cascade 
Hibernate: drop table if exists oauth_authorization_code_scopes cascade 
Hibernate: drop table if exists oauth_authorization_codes cascade 
Hibernate: drop table if exists oauth_client_grant_types cascade 
Hibernate: drop table if exists oauth_client_redirect_uris cascade 
Hibernate: drop table if exists oauth_client_scopes cascade 
Hibernate: drop table if exists oauth_clients cascade 
Hibernate: drop table if exists oauth_refresh_token_scopes cascade 
Hibernate: drop table if exists oauth_refresh_tokens cascade 
Hibernate: drop table if exists persona_activities cascade 
Hibernate: drop table if exists persona_activity_tags cascade 
Hibernate: drop table if exists persona_attributes cascade 
Hibernate: drop table if exists persona_profile_metadata cascade 
Hibernate: drop table if exists persona_profile_source_metadata cascade 
Hibernate: drop table if exists persona_profile_validation cascade 
Hibernate: drop table if exists persona_profiles cascade 
Hibernate: drop table if exists personas cascade 
Hibernate: drop table if exists privacy_settings cascade 
Hibernate: drop table if exists user_additional_roles cascade 
Hibernate: drop table if exists users cascade 
2025-09-12 19:28:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown initiated...
2025-09-12 19:28:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-13 - Shutdown completed.
Hibernate: drop table if exists audit_log_metadata cascade 
Hibernate: drop table if exists audit_logs cascade 
Hibernate: drop table if exists consent_record_metadata cascade 
Hibernate: drop table if exists consent_records cascade 
Hibernate: drop table if exists data_export_categories cascade 
Hibernate: drop table if exists data_export_metadata cascade 
Hibernate: drop table if exists data_export_requests cascade 
Hibernate: drop table if exists data_permission_conditions cascade 
Hibernate: drop table if exists data_permission_grants cascade 
Hibernate: drop table if exists data_permissions cascade 
Hibernate: drop table if exists oauth_access_token_scopes cascade 
Hibernate: drop table if exists oauth_access_tokens cascade 
Hibernate: drop table if exists oauth_authorization_code_scopes cascade 
Hibernate: drop table if exists oauth_authorization_codes cascade 
Hibernate: drop table if exists oauth_client_grant_types cascade 
Hibernate: drop table if exists oauth_client_redirect_uris cascade 
Hibernate: drop table if exists oauth_client_scopes cascade 
Hibernate: drop table if exists oauth_clients cascade 
Hibernate: drop table if exists oauth_refresh_token_scopes cascade 
Hibernate: drop table if exists oauth_refresh_tokens cascade 
Hibernate: drop table if exists persona_activities cascade 
Hibernate: drop table if exists persona_activity_tags cascade 
Hibernate: drop table if exists persona_attributes cascade 
Hibernate: drop table if exists persona_profile_metadata cascade 
Hibernate: drop table if exists persona_profile_source_metadata cascade 
Hibernate: drop table if exists persona_profile_validation cascade 
Hibernate: drop table if exists persona_profiles cascade 
Hibernate: drop table if exists personas cascade 
Hibernate: drop table if exists privacy_settings cascade 
Hibernate: drop table if exists user_additional_roles cascade 
Hibernate: drop table if exists users cascade 
2025-09-12 19:28:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown initiated...
2025-09-12 19:28:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-14 - Shutdown completed.

> Task :test FAILED

1467 tests completed, 265 failed, 30 skipped

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: file:///home/nasir/uol/focushive/services/identity-service/build/reports/tests/test/index.html

* Try:
> Run with --scan to get full insights.

BUILD FAILED in 45s
6 actionable tasks: 2 executed, 4 up-to-date
