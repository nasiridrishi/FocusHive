# Identity Service Test Configuration
spring.application.name=identity-service-test

# Database Configuration - H2 for tests
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA Configuration for tests
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.format_sql=false

# Disable Flyway for tests
spring.flyway.enabled=false

# Security Configuration
spring.security.user.name=test-admin
spring.security.user.password=test-admin-password

# JWT Configuration - fixed values for tests
jwt.secret=testSecretKeyThatIsAtLeast512BitsLongForHS512SecurityPurposesAbcDefGhiJklMnoPqrStuVwxYz123456789
jwt.expiration=3600000
jwt.refresh-expiration=86400000

# OAuth2 Authorization Server for tests
spring.security.oauth2.authorizationserver.issuer=http://localhost:8081

# CORS Configuration
cors.allowed-origins=http://localhost:3000,http://localhost:5173
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# Security Configuration
security.cors.allowed-origins=http://localhost:3000,http://localhost:5173

# Cache Configuration - Simple cache for tests
spring.cache.type=simple

# Redis Configuration - disabled for tests
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

# Disable tracing for tests
spring.autoconfigure.exclude=org.springframework.boot.actuate.autoconfigure.tracing.BraveAutoConfiguration,org.springframework.boot.actuate.autoconfigure.tracing.OpenTelemetryAutoConfiguration,org.springframework.boot.actuate.autoconfigure.tracing.MicrometerTracingAutoConfiguration,org.springframework.boot.actuate.autoconfigure.observation.ObservationAutoConfiguration,org.springframework.boot.actuate.autoconfigure.observation.web.servlet.WebMvcObservationAutoConfiguration

# Random port for tests
server.port=0

# Logging Configuration for tests
logging.level.root=WARN
logging.level.com.focushive.identity=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=false

# Management Configuration
management.endpoints.web.exposure.include=health
management.tracing.enabled=false
management.observations.enabled=false

# Environment Variables for EnvironmentConfig validation
# All required environment variables must be provided as properties
DB_HOST=localhost
DB_PORT=5432
DB_NAME=testdb
DB_USER=testuser
DB_PASSWORD=testpass123
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=testredispass
JWT_SECRET=testSecretKeyThatIsAtLeast512BitsLongForHS512SecurityPurposesAbcDefGhiJklMnoPqrStuVwxYz123456789
JWT_ACCESS_TOKEN_EXPIRATION=3600000
JWT_REFRESH_TOKEN_EXPIRATION=86400000
KEY_STORE_PASSWORD=test-keystore-pass
PRIVATE_KEY_PASSWORD=test-key-pass
FOCUSHIVE_CLIENT_SECRET=test-client-secret
ENCRYPTION_MASTER_KEY=test-encryption-key-32-characters!!
SERVER_PORT=8081
ISSUER_URI=http://localhost:8081
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
ADMIN_USERNAME=test-admin
ADMIN_PASSWORD=test-admin-password
LOG_LEVEL=INFO
SECURITY_LOG_LEVEL=WARN
SQL_LOG_LEVEL=WARN
RATE_LIMITING_ENABLED=false
SECURITY_HEADERS_ENABLED=false

# Encryption Configuration
app.encryption.master-key=dGVzdC1lbmNyeXB0aW9uLWtleS0zMi1jaGFyYWN0ZXJzISE=
